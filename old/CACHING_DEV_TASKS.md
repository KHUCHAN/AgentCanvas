# OpenClaw Caching êµ¬í˜„ ê°œë°œ ì‚¬í•­

**Date**: 2026-02-19
**ì¶œì²˜**: https://slashpage.com/thomasjeong/36nj8v2wq5zqj25ykq9z
**ëª©ì **: Claude API ë¹„ìš© ìµœëŒ€ 90% ì ˆê°ì„ ìœ„í•œ Prompt Caching ì‹œìŠ¤í…œ êµ¬í˜„

---

## í˜„ì¬ êµ¬í˜„ í˜„í™©

| ê¸°ëŠ¥ | í˜„ì¬ ìƒíƒœ | ë¹„ê³  |
|------|-----------|------|
| pinStore (ì¶œë ¥ ìºì‹±) | âœ… êµ¬í˜„ë¨ | íƒœìŠ¤í¬ ì¶œë ¥ í•€ ê³ ì • â€” API ìºì‹±ê³¼ ë³„ê°œ |
| openclaw.json ìºì‹± ì„¤ì • | âŒ ì—†ìŒ | cacheRetention, contextPruning ë¯¸êµ¬í˜„ |
| Persona íŒŒì¼ ê´€ë¦¬ | âŒ ì—†ìŒ | SOUL/USER/IDENTITY/HEARTBEAT.md ë¯¸êµ¬í˜„ |
| Cache trace ì§„ë‹¨ | âŒ ì—†ìŒ | cache-trace.jsonl ë¯¸êµ¬í˜„ |
| Cron/Heartbeat ì‹œìŠ¤í…œ | âŒ ì—†ìŒ | ì£¼ê¸°ì  íƒœìŠ¤í¬ ê²©ë¦¬ ì‹¤í–‰ ë¯¸êµ¬í˜„ |
| ë¹„ìš© ì¶”ì /ë¶„ì„ | âŒ ì—†ìŒ | í† í° ë¹„ìš© ëª¨ë‹ˆí„°ë§ ë¯¸êµ¬í˜„ |
| ëª¨ë¸ë³„ ë¼ìš°íŒ… | âŒ ì—†ìŒ | Haiku/Sonnet íƒœìŠ¤í¬ë³„ ë¶„ê¸° ë¯¸êµ¬í˜„ |
| ì»¨í…ìŠ¤íŠ¸ í¬ê¸° ê´€ë¦¬ | âŒ ì—†ìŒ | 180k í† í° ì„ê³„ì¹˜ ì„¸ì…˜ ì¬ì‹œì‘ ë¯¸êµ¬í˜„ |

---

## 1. ìºì‹± ì„¤ì • ì‹œìŠ¤í…œ (openclaw.json)

### 1.1 ì„¤ì • íŒŒì¼ êµ¬ì¡° ì •ì˜

**íŒŒì¼**: `openclaw.json` (ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ ë˜ëŠ” `~/.openclaw/`)

```json
{
  "cacheRetention": "long",
  "contextPruning": {
    "mode": "cache-ttl",
    "ttl": 3600
  },
  "cacheDiagnostics": {
    "enabled": false,
    "logPath": "~/.openclaw/logs/cache-trace.jsonl"
  }
}
```

### ê°œë°œ ì‚¬í•­

- [ ] `openclaw.json` ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° íƒ€ì… ìƒì„± (`OpenClawConfig` ì¸í„°í˜ì´ìŠ¤)
- [ ] ì„¤ì • íŒŒì¼ ë¡œë“œ/íŒŒì‹± ì„œë¹„ìŠ¤ êµ¬í˜„ (`configService.ts`)
- [ ] `cacheRetention` ì˜µì…˜: `"short"` (5ë¶„) / `"long"` (1ì‹œê°„) ì§€ì›
- [ ] `contextPruning` ì˜µì…˜: `"cache-ttl"` ëª¨ë“œ + TTL ì´ˆ ë‹¨ìœ„ ì„¤ì •
- [ ] ì„¤ì • ë³€ê²½ ì‹œ hot-reload ë˜ëŠ” gateway restart íŠ¸ë¦¬ê±°
- [ ] SettingsModal UIì— ìºì‹± ì„¤ì • ì„¹ì…˜ ì¶”ê°€

---

## 2. Prompt Caching ì—”ì§„

### 2.1 í† í° ë¹„ìš© êµ¬ì¡° (Claude Sonnet 4.5 ê¸°ì¤€)

| êµ¬ë¶„ | ë¹„ìš©/1M í† í° | ë¹„ìœ¨ |
|------|-------------|------|
| Standard Input | $3.00 | 100% (ê¸°ì¤€) |
| Cache Write | $3.75 | 125% |
| Cache Read | $0.30 | **10%** |
| Output | $15.00 | â€” |

í•µì‹¬: ìºì‹œ ì €ì¥ ë¹„ìš©ì€ ì•½ê°„ ë†’ì§€ë§Œ, ì½ê¸° ë¹„ìš©ì´ 90% ì €ë ´

### ê°œë°œ ì‚¬í•­

- [ ] API í˜¸ì¶œ ì‹œ `cache_control` íŒŒë¼ë¯¸í„° ìë™ ì‚½ì… ë¡œì§ êµ¬í˜„
- [ ] Static ì»¨í…ì¸  (Persona íŒŒì¼)ë¥¼ ìºì‹œ ê°€ëŠ¥ ë¸”ë¡ìœ¼ë¡œ í‘œì‹œí•˜ëŠ” í”„ë¡¬í”„íŠ¸ ë˜í¼
- [ ] ìºì‹œ ì ì¤‘ë¥ (hit rate) ì¶”ì  ë©”íŠ¸ë¦­ ìˆ˜ì§‘ê¸°
- [ ] í˜¸ì¶œë³„ cacheRead / cacheWrite í† í° ìˆ˜ ê¸°ë¡
- [ ] ìºì‹œ ë§Œë£Œ ì „ ìë™ ê°±ì‹ (warm-up) ë¡œì§ (long ëª¨ë“œ ì‹œ)

---

## 3. Persona íŒŒì¼ ì‹œìŠ¤í…œ

### 3.1 ì •ì  ì»¨í…ìŠ¤íŠ¸ íŒŒì¼ (ìºì‹± ëŒ€ìƒ)

ê°€ì´ë“œì— ë”°ë¥´ë©´, ë§¤ API ìš”ì²­ë§ˆë‹¤ í¬í•¨ë˜ëŠ” ì •ì  íŒŒì¼ì´ 8,000~15,000 í† í°ì´ë©°, ìºì‹±ì˜ í•µì‹¬ ëŒ€ìƒì´ë‹¤.

| íŒŒì¼ | ì—­í•  | ì˜ˆìƒ í† í° |
|------|------|-----------|
| `SOUL.md` | í˜ë¥´ì†Œë‚˜ ì •ì˜ â€” AI ì–´ì‹œìŠ¤í„´íŠ¸ì˜ ì„±ê²©/ê°€ì¹˜ê´€ | 2,000~3,000 |
| `USER.md` | ì‚¬ìš©ì í”„ë¡œí•„ â€” ì„ í˜¸ë„, ì‘ì—… ìŠ¤íƒ€ì¼ | 1,000~2,000 |
| `AGENTS.md` | í–‰ë™ ê·œì¹™ â€” ì—ì´ì „íŠ¸ ê°„ í”„ë¡œí† ì½œ | 2,000~4,000 |
| `MEMORY.md` | ì¥ê¸° ë©”ëª¨ë¦¬ â€” ëˆ„ì  í•™ìŠµ/ê²°ì • ì‚¬í•­ | 1,500~3,000 |
| `HEARTBEAT.md` | ì£¼ê¸°ì  ì²´í¬ë¦¬ìŠ¤íŠ¸ â€” ë°˜ë³µ ì‘ì—… ëª©ë¡ | 500~1,000 |
| `IDENTITY.md` | ì–´ì‹œìŠ¤í„´íŠ¸ ì•„ì´ë´í‹°í‹° â€” ì´ë¦„/ì—­í• /ì œì•½ | 500~1,000 |

### ê°œë°œ ì‚¬í•­

- [ ] Persona íŒŒì¼ ìŠ¤ìºë„ˆ ì„œë¹„ìŠ¤ (`personaService.ts`)
  - ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ìœ„ 6ê°œ íŒŒì¼ ìë™ íƒì§€
  - íŒŒì¼ ì—†ì„ ì‹œ ê¸°ë³¸ í…œí”Œë¦¿ ìƒì„± (commonRulesService íŒ¨í„´ ì°¸ê³ )
- [ ] í”„ë¡¬í”„íŠ¸ ë¹Œë“œ ì‹œ Persona íŒŒì¼ ìˆœì„œ ìµœì í™”
  - **ì •ì  ì»¨í…ì¸ (SOUL, USER, AGENTS) â†’ ì•ìª½** ë°°ì¹˜ (ìºì‹œ ì ì¤‘ë¥  ê·¹ëŒ€í™”)
  - **ë™ì  ì»¨í…ì¸ (íƒ€ì„ìŠ¤íƒ¬í”„, ì‹¤ì‹œê°„ ë°ì´í„°) â†’ ë’¤ìª½** ë°°ì¹˜
- [ ] íŒŒì¼ ë³€ê²½ ê°ì§€ (`fs.watch`) â†’ ë³€ê²½ ì‹œì—ë§Œ ìºì‹œ ê°±ì‹  íŠ¸ë¦¬ê±°
- [ ] íŒŒì¼ë³„ í† í° ìˆ˜ ì¶”ì •/í‘œì‹œ ê¸°ëŠ¥ (UIì—ì„œ í™•ì¸)
- [ ] Persona íŒŒì¼ í¸ì§‘ UI (SettingsModal ë˜ëŠ” ì „ìš© íŒ¨ë„)

---

## 4. Cache Trace ì§„ë‹¨

### 4.1 ì§„ë‹¨ ë¡œê·¸ ì‹œìŠ¤í…œ

```jsonl
{"ts":"2026-02-19T10:00:00Z","callId":"c1","cacheRead":8590,"cacheWrite":11772,"inputTokens":20362,"cost":0.047}
{"ts":"2026-02-19T10:01:00Z","callId":"c2","cacheRead":27468,"cacheWrite":266,"inputTokens":27734,"cost":0.011}
```

### ê°œë°œ ì‚¬í•­

- [ ] Cache trace JSONL ë¡œê±° êµ¬í˜„ (`cacheDiagnostics.ts`)
  - ì €ì¥ ìœ„ì¹˜: `.openclaw/logs/cache-trace.jsonl` (ì„¤ì • ê°€ëŠ¥)
  - í˜¸ì¶œë³„ ê¸°ë¡: cacheRead, cacheWrite, inputTokens, outputTokens, cost, model
- [ ] ì§„ë‹¨ í† ê¸€ (openclaw.json `cacheDiagnostics.enabled`)
- [ ] ì¼ì¼ ë¹„ìš© ìš”ì•½ ê³„ì‚°ê¸°
  - ìºì‹œ ì‚¬ìš© ë¹„ìš© vs ìºì‹œ ë¯¸ì‚¬ìš© ë¹„ìš© ë¹„êµ
  - ì ˆê°ë¥  ìë™ ê³„ì‚°
- [ ] ì„¸ì…˜ JSONLì—ì„œ cacheRead/cacheWrite ì¶”ì¶œí•˜ëŠ” ë¶„ì„ ìœ í‹¸ë¦¬í‹°
- [ ] (ì„ íƒ) RunPanel ë˜ëŠ” StatusBarì— ì‹¤ì‹œê°„ ìºì‹œ ì ì¤‘ë¥  í‘œì‹œ

---

## 5. ê²©ë¦¬ëœ Cron ì„¸ì…˜

### 5.1 Heartbeat & ì£¼ê¸°ì  íƒœìŠ¤í¬

ê°€ì´ë“œì— ë”°ë¥´ë©´, ì˜ˆì•½ ì‘ì—…ì€ ë³„ë„ ì„¸ì…˜ì—ì„œ ì œí•œëœ ì»¨í…ìŠ¤íŠ¸ë¡œ ì‹¤í–‰í•´ì•¼ ì´ˆê¸° ìºì‹œ ì“°ê¸° ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

### ê°œë°œ ì‚¬í•­

- [ ] CronService êµ¬í˜„ (`cronService.ts`)
  - HEARTBEAT.md ê¸°ë°˜ ì£¼ê¸°ì  ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹¤í–‰
  - ì¼ì • ê°„ê²©(ì˜ˆ: 30ë¶„, 1ì‹œê°„) ë°˜ë³µ
- [ ] ê²©ë¦¬ ì„¸ì…˜ ê´€ë¦¬
  - Cron ì‘ì—…ì€ ë©”ì¸ ì„¸ì…˜ê³¼ ë¶„ë¦¬ëœ ë³„ë„ ì„¸ì…˜ì—ì„œ ì‹¤í–‰
  - ìµœì†Œ ì»¨í…ìŠ¤íŠ¸ë§Œ í¬í•¨ (HEARTBEAT.md + í•„ìˆ˜ íŒŒì¼ë§Œ)
  - ë©”ì¸ ì„¸ì…˜ì˜ ëŒ€í™” íˆìŠ¤í† ë¦¬ í¬í•¨í•˜ì§€ ì•ŠìŒ
- [ ] CRON.md íŒŒì¼ ê´€ë¦¬
  - 30ì¤„ ì´ë‚´ ê°„ê²°í•˜ê²Œ ìœ ì§€
  - ì „ì²´ ì›Œí¬í”Œë¡œìš° íŒŒì¼ ë¡œë”© ëŒ€ì‹  íŠ¹ì • ì„¹ì…˜ë§Œ ì°¸ì¡°
- [ ] UI: Cron ì‘ì—… ìŠ¤ì¼€ì¤„ ì„¤ì • ë° ì‹¤í–‰ ì´ë ¥ í‘œì‹œ

---

## 6. ë¹„ìš© ì¶”ì  & ë¶„ì„ ëŒ€ì‹œë³´ë“œ

### 6.1 ì‹¤ì‹œê°„ ë¹„ìš© ëª¨ë‹ˆí„°ë§

ê°€ì´ë“œì˜ ì‹¤ì œ ì„¸ì…˜ ë°ì´í„°:
- Call #1: $0.047 (ìºì‹œ ì´ˆê¸°í™”)
- Call #4: $0.011 (ìºì‹œ í™œìš© ì‹œì‘)
- Call #16: $0.025 (92% ë¹„ìš© ì ˆê°)

### ê°œë°œ ì‚¬í•­

- [ ] í† í° ì‚¬ìš©ëŸ‰ ì¶”ì ê¸° (`tokenTracker.ts`)
  - í˜¸ì¶œë³„: inputTokens, outputTokens, cacheRead, cacheWrite
  - ì„¸ì…˜ë³„: ì´ ë¹„ìš©, ì ˆê° ë¹„ìš©, ì ˆê°ë¥ 
  - ì¼ë³„/ì›”ë³„ ì§‘ê³„
- [ ] ë¹„ìš© ê³„ì‚° ì—”ì§„
  - ëª¨ë¸ë³„ ê°€ê²©í‘œ ë‚´ì¥ (Sonnet: $3/$15, Haiku: $0.80/$4)
  - ìºì‹œ ìœ /ë¬´ ë¹„êµ ë¹„ìš© ì‚°ì¶œ
  - ì›”ê°„ ì˜ˆìƒ ë¹„ìš© í”„ë¡œì ì…˜
- [ ] StatusBarì— ì‹¤ì‹œê°„ í‘œì‹œ
  - í˜„ì¬ ì„¸ì…˜ ë¹„ìš©, ì ˆê°ë¥ 
  - ì˜ˆ: `ğŸ’° $0.025 | ğŸ¯ 92% saved`
- [ ] (ì„ íƒ) ë¹„ìš© ë¶„ì„ íŒ¨ë„ ë˜ëŠ” ë¦¬í¬íŠ¸ ìƒì„± ê¸°ëŠ¥

---

## 7. ëª¨ë¸ ì„ íƒ ë¼ìš°íŒ…

### 7.1 íƒœìŠ¤í¬ë³„ ëª¨ë¸ ë¶„ê¸°

| íƒœìŠ¤í¬ ìœ í˜• | ê¶Œì¥ ëª¨ë¸ | ë¹„ìš©/1M ì…ë ¥ |
|-------------|-----------|-------------|
| Heartbeat ì²´í¬ | Haiku 4.5 | $0.80 |
| ë‹¨ìˆœ ë°˜ë³µ ì‘ì—… | Haiku 4.5 | $0.80 |
| ì½”ë“œ ë¶„ì„/ìƒì„± | Sonnet 4.5 | $3.00 |
| ë³µì¡í•œ ì¶”ë¡  | Opus 4.5 | â€” |

### ê°œë°œ ì‚¬í•­

- [ ] íƒœìŠ¤í¬ ë³µì¡ë„ ë¶„ë¥˜ê¸°
  - ê°„ë‹¨ (heartbeat, ìƒíƒœ ì²´í¬) â†’ Haiku ìë™ ë¼ìš°íŒ…
  - ë³´í†µ (ì½”ë“œ ìƒì„±, ë¶„ì„) â†’ Sonnet ê¸°ë³¸
  - ë³µì¡ (ì•„í‚¤í…ì²˜ ì„¤ê³„, ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì¡°ìœ¨) â†’ Opus/Sonnet
- [ ] ì—ì´ì „íŠ¸ë³„ ëª¨ë¸ ì˜¤ë²„ë¼ì´ë“œ ì„¤ì •
  - AgentProfileì— `preferredModel` í•„ë“œ ì¶”ê°€
  - RunPanelì—ì„œ ì‹¤í–‰ ì‹œ ëª¨ë¸ ì„ íƒ ê°€ëŠ¥
- [ ] openclaw.jsonì— ëª¨ë¸ ë¼ìš°íŒ… ê·œì¹™ ì„¤ì •
  ```json
  {
    "modelRouting": {
      "heartbeat": "haiku-4.5",
      "cron": "haiku-4.5",
      "default": "sonnet-4.5"
    }
  }
  ```

---

## 8. ì»¨í…ìŠ¤íŠ¸ í¬ê¸° ê´€ë¦¬

### 8.1 180k í† í° ì„ê³„ì¹˜ ê´€ë¦¬

ê°€ì´ë“œì— ë”°ë¥´ë©´, ì»¨í…ìŠ¤íŠ¸ê°€ 180,000 í† í°ì— ë„ë‹¬í•˜ë©´ ìƒˆ ì„¸ì…˜ì„ ì‹œì‘í•´ì•¼ ìºì‹œ íš¨ìœ¨ ì €í•˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

### ê°œë°œ ì‚¬í•­

- [ ] í˜„ì¬ ì„¸ì…˜ ì»¨í…ìŠ¤íŠ¸ í¬ê¸° ì¶”ì ê¸°
  - ëˆ„ì  ì…ë ¥/ì¶œë ¥ í† í° ìˆ˜ ì‹¤ì‹œê°„ ê³„ì‚°
  - UIì— ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©ë¥  í‘œì‹œ (ì˜ˆ: `Context: 120k/180k`)
- [ ] ì„ê³„ì¹˜ ë„ë‹¬ ì‹œ ìë™ ì•Œë¦¼
  - 150k ë„ë‹¬ ì‹œ ê²½ê³  (ë…¸ë€ìƒ‰)
  - 180k ë„ë‹¬ ì‹œ ì„¸ì…˜ ì¬ì‹œì‘ ê¶Œê³  (ë¹¨ê°„ìƒ‰)
- [ ] ì„¸ì…˜ ì¬ì‹œì‘ ì‹œ í•µì‹¬ ì»¨í…ìŠ¤íŠ¸ ì´ì „
  - MEMORY.mdì— í˜„ì¬ ì„¸ì…˜ ìš”ì•½ ì €ì¥
  - ìƒˆ ì„¸ì…˜ì—ì„œ Persona íŒŒì¼ + MEMORY.mdë¡œ ì»¨í…ìŠ¤íŠ¸ ë³µì›
- [ ] (ì„ íƒ) ìë™ ì„¸ì…˜ ë¶„í•  â€” ì„ê³„ì¹˜ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ ìƒˆ ì„¸ì…˜ ìƒì„±

---

## 9. í”„ë¡¬í”„íŠ¸ ìµœì í™”

### 9.1 ìºì‹œ ì ì¤‘ë¥  ê·¹ëŒ€í™”ë¥¼ ìœ„í•œ í”„ë¡¬í”„íŠ¸ êµ¬ì„± ìˆœì„œ

```
[ìºì‹œ ê°€ëŠ¥ ë¸”ë¡ â€” ë³€ê²½ ë¹ˆë„ ë‚®ìŒ]
  1. SOUL.md        â† ê±°ì˜ ë³€ê²½ ì•ˆ ë¨
  2. IDENTITY.md    â† ê±°ì˜ ë³€ê²½ ì•ˆ ë¨
  3. AGENTS.md      â† ê°€ë” ë³€ê²½
  4. USER.md        â† ê°€ë” ë³€ê²½
  5. MEMORY.md      â† ì„¸ì…˜ ì¢…ë£Œ ì‹œ ì—…ë°ì´íŠ¸

[ë¹„ìºì‹œ ë¸”ë¡ â€” ë³€ê²½ ë¹ˆë„ ë†’ìŒ]
  6. HEARTBEAT.md   â† ì£¼ê¸°ì  ë³€ê²½
  7. ëŒ€í™” íˆìŠ¤í† ë¦¬   â† ë§¤ í˜¸ì¶œ ë³€ê²½
  8. í˜„ì¬ ìš”ì²­       â† ë§¤ í˜¸ì¶œ ë³€ê²½
```

### ê°œë°œ ì‚¬í•­

- [ ] promptBuilder.ts ë¦¬íŒ©í„°ë§
  - ì •ì /ë™ì  ì»¨í…ì¸  ë¶„ë¦¬ ë¡œì§ ì¶”ê°€
  - ìºì‹œ ê°€ëŠ¥ ë¸”ë¡ì— `cache_control: { type: "ephemeral" }` ë§ˆì»¤ ì‚½ì…
  - íŒŒì¼ ë³€ê²½ ë¹ˆë„ ê¸°ë°˜ ìë™ ì •ë ¬
- [ ] íŒŒì¼ ì „ì²´ ì¬ìƒì„± ë°©ì§€
  - íƒ€ì„ìŠ¤íƒ¬í”„/ì‹¤ì‹œê°„ ë°ì´í„°ê°€ í¬í•¨ëœ íŒŒì¼ì€ í•´ë‹¹ ë¶€ë¶„ë§Œ ë™ì ìœ¼ë¡œ ì£¼ì…
  - ë‚˜ë¨¸ì§€ëŠ” ìºì‹œëœ ë²„ì „ ìœ ì§€

---

## 10. ìºì‹œ ì„±ëŠ¥ ê²€ì¦ ë°©ë²•

### ê°œë°œ ì‚¬í•­

- [ ] ì„¸ì…˜ JSONLì—ì„œ cacheRead/cacheWrite í•„ë“œ íŒŒì‹±
  - cacheRead > 0ì´ë©´ ìºì‹œ ì ì¤‘
  - cacheRead / (cacheRead + cacheWrite) = ìºì‹œ ì ì¤‘ë¥ 
- [ ] ê²€ì¦ ëª…ë ¹ì–´ ë˜ëŠ” CommandBar ì•¡ì…˜ ì¶”ê°€
  - `Cache Status`: í˜„ì¬ ì„¸ì…˜ ìºì‹œ í†µê³„ í‘œì‹œ
  - `Cache Report`: ì¼ì¼ ìºì‹œ ë¦¬í¬íŠ¸ ìƒì„±
- [ ] ìë™ ê²€ì¦ í…ŒìŠ¤íŠ¸
  - ìºì‹œ ì„¤ì • í›„ ì—°ì† 3íšŒ í˜¸ì¶œ ì‹œ cacheRead ì¦ê°€ í™•ì¸
  - long ëª¨ë“œì—ì„œ 1ì‹œê°„ ë‚´ ìºì‹œ ìœ ì§€ í™•ì¸

---

## êµ¬í˜„ ìš°ì„ ìˆœìœ„ ë¡œë“œë§µ

### Phase 1 â€” í•µì‹¬ ìºì‹± ì¸í”„ë¼ (3~4ì¼)

| ì‘ì—… | íŒŒì¼ | ì‹œê°„ |
|------|------|------|
| openclaw.json ìŠ¤í‚¤ë§ˆ + configService | ì‹ ê·œ `configService.ts` | 1ì¼ |
| Prompt caching íŒŒë¼ë¯¸í„° ì‚½ì… ë¡œì§ | promptBuilder.ts, cliExecutor.ts | 1ì¼ |
| Persona íŒŒì¼ ìŠ¤ìºë„ˆ + ìˆœì„œ ìµœì í™” | ì‹ ê·œ `personaService.ts` | 1ì¼ |
| Cache trace JSONL ë¡œê±° | ì‹ ê·œ `cacheDiagnostics.ts` | 0.5ì¼ |

### Phase 2 â€” ë¹„ìš© ì¶”ì  & ëª¨ë‹ˆí„°ë§ (2~3ì¼)

| ì‘ì—… | íŒŒì¼ | ì‹œê°„ |
|------|------|------|
| í† í° ì‚¬ìš©ëŸ‰ ì¶”ì ê¸° | ì‹ ê·œ `tokenTracker.ts` | 1ì¼ |
| ë¹„ìš© ê³„ì‚° ì—”ì§„ (ëª¨ë¸ë³„ ê°€ê²©í‘œ) | ì‹ ê·œ `costCalculator.ts` | 0.5ì¼ |
| StatusBar ì‹¤ì‹œê°„ ë¹„ìš©/ì ˆê°ë¥  í‘œì‹œ | App.tsx, styles.css | 0.5ì¼ |
| ì»¨í…ìŠ¤íŠ¸ í¬ê¸° ì¶”ì  + ì„ê³„ì¹˜ ì•Œë¦¼ | App.tsx, extension.ts | 1ì¼ |

### Phase 3 â€” Cron & ëª¨ë¸ ë¼ìš°íŒ… (2~3ì¼)

| ì‘ì—… | íŒŒì¼ | ì‹œê°„ |
|------|------|------|
| CronService + ê²©ë¦¬ ì„¸ì…˜ | ì‹ ê·œ `cronService.ts` | 1ì¼ |
| HEARTBEAT.md ê´€ë¦¬ + Cron UI | ì‹ ê·œ ì»´í¬ë„ŒíŠ¸ | 1ì¼ |
| ëª¨ë¸ ë¼ìš°íŒ… ê·œì¹™ | configService.ts, cliExecutor.ts | 0.5ì¼ |
| AgentProfile preferredModel í•„ë“œ | types.ts, agentProfileService.ts | 0.5ì¼ |

### Phase 4 â€” UI & ê²€ì¦ (1~2ì¼)

| ì‘ì—… | íŒŒì¼ | ì‹œê°„ |
|------|------|------|
| SettingsModal ìºì‹± ì„¤ì • ì„¹ì…˜ | SettingsModal.tsx | 0.5ì¼ |
| ìºì‹œ ì„±ëŠ¥ ê²€ì¦ ì»¤ë§¨ë“œ | CommandBar.tsx | 0.5ì¼ |
| ë¹„ìš© ë¶„ì„ ë¦¬í¬íŠ¸ ìƒì„± | ì‹ ê·œ ìœ í‹¸ë¦¬í‹° | 0.5ì¼ |
| í†µí•© í…ŒìŠ¤íŠ¸ | ì‹ ê·œ í…ŒìŠ¤íŠ¸ | 0.5ì¼ |

**ì´ ì˜ˆìƒ ì†Œìš”**: 8~12ì¼

---

## í•µì‹¬ ì‹ ê·œ íŒŒì¼ ëª©ë¡

| íŒŒì¼ | ì—­í•  |
|------|------|
| `extension/src/services/configService.ts` | openclaw.json ë¡œë“œ/íŒŒì‹±/ê°ì‹œ |
| `extension/src/services/personaService.ts` | Persona íŒŒì¼ íƒì§€/ì •ë ¬/í† í° ì¶”ì • |
| `extension/src/services/cacheDiagnostics.ts` | Cache trace JSONL ë¡œê¹… |
| `extension/src/services/tokenTracker.ts` | í† í° ì‚¬ìš©ëŸ‰/ë¹„ìš© ì¶”ì  |
| `extension/src/services/costCalculator.ts` | ëª¨ë¸ë³„ ë¹„ìš© ê³„ì‚° |
| `extension/src/services/cronService.ts` | Heartbeat/Cron ê²©ë¦¬ ì„¸ì…˜ ê´€ë¦¬ |

## ìˆ˜ì • ëŒ€ìƒ ê¸°ì¡´ íŒŒì¼

| íŒŒì¼ | ìˆ˜ì • ë‚´ìš© |
|------|-----------|
| `extension/src/services/promptBuilder.ts` | ì •ì /ë™ì  ë¶„ë¦¬, cache_control ë§ˆì»¤, íŒŒì¼ ìˆœì„œ ìµœì í™” |
| `extension/src/services/cliExecutor.ts` | ëª¨ë¸ ë¼ìš°íŒ…, ìºì‹œ íŒŒë¼ë¯¸í„° ì „ë‹¬ |
| `extension/src/types.ts` | OpenClawConfig, CacheMetrics, preferredModel í•„ë“œ |
| `extension/src/messages/protocol.ts` | CACHE_STATUS, COST_REPORT ë“± ë©”ì‹œì§€ íƒ€ì… |
| `extension/src/extension.ts` | configService í†µí•©, ìºì‹œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ |
| `webview-ui/src/App.tsx` | StatusBar ë¹„ìš© í‘œì‹œ, ì»¨í…ìŠ¤íŠ¸ í¬ê¸° í‘œì‹œ |
| `webview-ui/src/panels/SettingsModal.tsx` | ìºì‹± ì„¤ì • UI ì„¹ì…˜ |
| `webview-ui/src/panels/CommandBar.tsx` | Cache Status/Report ì»¤ë§¨ë“œ |

---

## ì²´í¬ë¦¬ìŠ¤íŠ¸ (ê°€ì´ë“œ ì›ë³¸ ê¸°ì¤€)

- [ ] openclaw.jsonì— `cacheRetention: "long"` ì„¤ì • ê°€ëŠ¥
- [ ] `contextPruning`ì„ `cache-ttl` ëª¨ë“œë¡œ ì„¤ì • ê°€ëŠ¥
- [ ] Cron ì‘ì—…ì´ ê²©ë¦¬ëœ ì„¸ì…˜ì—ì„œ ì‹¤í–‰ë¨
- [ ] ì›Œí¬í”Œë¡œìš° íŒŒì¼ì´ ê°„ê²°í•˜ê²Œ ìœ ì§€ë¨ (30ì¤„ ì´ë‚´ ê¶Œì¥)
- [ ] 180k ì»¨í…ìŠ¤íŠ¸ ì„ê³„ì¹˜ì—ì„œ ìƒˆ ì„¸ì…˜ ì‹œì‘ ì•ˆë‚´
- [ ] Haiku ëª¨ë¸ì´ ë°˜ë³µ ì‘ì—…ì— ìë™ ë°°ì •ë¨
- [ ] Cache trace ì§„ë‹¨ ë¡œê¹… í™œì„±í™” ê°€ëŠ¥
- [ ] ì¼ì¼ ë¹„ìš© ì ˆê°ë¥  í™•ì¸ ê°€ëŠ¥

---

*OpenClaw Caching Development Tasks v1.0 â€” 2026-02-19*
